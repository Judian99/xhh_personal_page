<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>有效沟通 高效执行 - 互动游戏</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        .float-animation {
            animation: float 3s ease-in-out infinite;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }
        .message-bubble {
            transition: all 0.3s ease;
        }
        .message-bubble:hover {
            transform: scale(1.1);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        .progress-bar {
            transition: width 0.5s ease;
        }
        .task-item {
            transition: all 0.3s ease;
        }
        .task-item:hover {
            transform: translateX(5px);
        }
        .game-container {
            max-height: 90vh;
            overflow-y: auto;
        }
        @media (min-width: 1024px) {
            .game-container {
                width: 800px;
            }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen flex flex-col items-center justify-center p-4">
    <div class="game-container w-full bg-white rounded-2xl shadow-xl overflow-hidden relative">
        <!-- 游戏主界面 -->
        <div id="game-container" class="flex flex-col">
            <!-- 顶部标题区域 -->
            <div class="bg-gradient-to-r from-blue-600 to-indigo-700 p-4 text-white text-center sticky top-0 z-10">
                <h1 class="text-2xl font-bold float-animation">有效沟通 高效执行</h1>
                <p class="text-sm opacity-80">徐泓晖专属互动游戏</p>
            </div>
            
            <!-- 游戏内容区域 -->
            <div class="flex-1 p-6 flex flex-col space-y-6">
                <!-- 游戏说明 -->
                <div id="intro-screen" class="text-center flex flex-col items-center justify-center min-h-[400px] fade-in">
                    <div class="bg-blue-100 rounded-full p-4 mb-6">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" />
                        </svg>
                    </div>
                    <h2 class="text-xl font-semibold text-gray-800 mb-2">沟通效率与执行效果的关系</h2>
                    <p class="text-gray-600 mb-6 max-w-md">在这个游戏中，您将体验不同沟通方式如何影响任务执行效果。通过调整沟通参数，观察最终执行结果的变化。</p>
                    <button id="start-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded-full transition-all transform hover:scale-105 shadow-lg pulse-animation">
                        开始游戏
                    </button>
                </div>
                
                <!-- 游戏主界面 -->
                <div id="game-screen" class="hidden flex flex-col space-y-6">
                    <!-- 沟通参数设置 -->
                    <div class="bg-indigo-50 rounded-lg p-4">
                        <h3 class="font-medium text-indigo-800 mb-2">沟通参数设置</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-2">
                            <div>
                                <label class="block text-sm text-gray-600 mb-1">清晰度 <span id="clarity-value" class="font-medium">50%</span></label>
                                <input type="range" id="clarity" min="0" max="100" value="50" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                            </div>
                            <div>
                                <label class="block text-sm text-gray-600 mb-1">及时性 <span id="timeliness-value" class="font-medium">50%</span></label>
                                <input type="range" id="timeliness" min="0" max="100" value="50" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                            </div>
                            <div>
                                <label class="block text-sm text-gray-600 mb-1">反馈频率 <span id="feedback-value" class="font-medium">50%</span></label>
                                <input type="range" id="feedback" min="0" max="100" value="50" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                            </div>
                        </div>
                        <button id="simulate-btn" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-4 rounded-full transition-all transform hover:scale-[1.02] shadow">
                            模拟执行
                        </button>
                    </div>
                    
                    <!-- 沟通过程可视化 -->
                    <div class="bg-white rounded-lg border border-gray-200 p-4">
                        <h3 class="font-medium text-gray-800 mb-4">沟通过程可视化</h3>
                        <div class="flex items-center justify-center relative">
                            <div class="absolute inset-0 flex items-center justify-center">
                                <div class="h-1 bg-gray-200 w-full"></div>
                            </div>
                            
                            <div id="communication-flow" class="relative w-full flex justify-between z-10">
                                <!-- 沟通节点将通过JS动态添加 -->
                            </div>
                        </div>
                    </div>
                    
                    <!-- 执行结果展示 -->
                    <div id="result-section" class="hidden bg-white rounded-lg border border-gray-200 p-4">
                        <h3 class="font-medium text-gray-800 mb-3">执行结果分析</h3>
                        <div class="mb-3">
                            <div class="flex justify-between text-sm text-gray-600 mb-1">
                                <span>执行效率</span>
                                <span id="efficiency-score">0%</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2.5">
                                <div id="efficiency-bar" class="bg-green-500 h-2.5 rounded-full progress-bar" style="width: 0%"></div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <div class="flex justify-between text-sm text-gray-600 mb-1">
                                <span>任务完成度</span>
                                <span id="completion-score">0%</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2.5">
                                <div id="completion-bar" class="bg-blue-500 h-2.5 rounded-full progress-bar" style="width: 0%"></div>
                            </div>
                        </div>
                        <div class="text-sm text-gray-600">
                            <p id="result-feedback" class="italic">调整沟通参数并点击"模拟执行"查看不同效果</p>
                        </div>
                    </div>
                </div>
                
                <!-- 游戏结束界面 -->
                <div id="end-screen" class="hidden text-center flex flex-col items-center justify-center min-h-[400px]">
                    <div class="bg-green-100 rounded-full p-4 mb-6">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                    </div>
                    <h2 class="text-xl font-semibold text-gray-800 mb-2">游戏完成!</h2>
                    <p class="text-gray-600 mb-4 max-w-md">您已经体验了不同沟通方式对执行效果的影响。记住:清晰的沟通带来高效的执行!</p>
                    <div class="bg-blue-50 rounded-lg p-3 mb-6 w-full">
                        <p class="text-blue-800 font-medium">徐泓晖的关键收获:</p>
                        <ul class="text-left text-sm text-gray-700 mt-2 space-y-1">
                            <li class="flex items-start">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-blue-500 mt-0.5 mr-1.5 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                </svg>
                                <span>提高沟通清晰度可减少误解</span>
                            </li>
                            <li class="flex items-start">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-blue-500 mt-0.5 mr-1.5 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                </svg>
                                <span>及时反馈能显著提升执行效率</span>
                            </li>
                            <li class="flex items-start">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-blue-500 mt-0.5 mr-1.5 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                </svg>
                                <span>平衡各沟通要素可获得最佳效果</span>
                            </li>
                        </ul>
                    </div>
                    <button id="restart-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded-full transition-all transform hover:scale-105 shadow-lg">
                        再玩一次
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 获取DOM元素
            const startBtn = document.getElementById('start-btn');
            const restartBtn = document.getElementById('restart-btn');
            const simulateBtn = document.getElementById('simulate-btn');
            const introScreen = document.getElementById('intro-screen');
            const gameScreen = document.getElementById('game-screen');
            const endScreen = document.getElementById('end-screen');
            const resultSection = document.getElementById('result-section');
            const communicationFlow = document.getElementById('communication-flow');
            
            // 开始游戏
            startBtn.addEventListener('click', function() {
                introScreen.classList.add('hidden');
                gameScreen.classList.remove('hidden');
                resultSection.classList.add('hidden');
                initializeCommunicationFlow();
            });
            
            // 重新开始游戏
            restartBtn.addEventListener('click', function() {
                endScreen.classList.add('hidden');
                gameScreen.classList.remove('hidden');
                resultSection.classList.add('hidden');
                initializeCommunicationFlow();
            });
            
            // 初始化沟通流程可视化
            function initializeCommunicationFlow() {
                communicationFlow.innerHTML = '';
                
                const steps = [
                    { icon: '💡', label: '任务发起', color: 'bg-purple-100 text-purple-800' },
                    { icon: '🗣️', label: '传达', color: 'bg-blue-100 text-blue-800' },
                    { icon: '👂', label: '接收', color: 'bg-green-100 text-green-800' },
                    { icon: '❓', label: '确认', color: 'bg-yellow-100 text-yellow-800' },
                    { icon: '✅', label: '执行', color: 'bg-indigo-100 text-indigo-800' }
                ];
                
                steps.forEach((step, index) => {
                    const stepElement = document.createElement('div');
                    stepElement.className = `flex flex-col items-center`;
                    stepElement.innerHTML = `
                        <div class="message-bubble w-12 h-12 rounded-full flex items-center justify-center mb-1 ${step.color} shadow-md text-xl">
                            ${step.icon}
                        </div>
                        <span class="text-xs text-gray-600">${step.label}</span>
                    `;
                    communicationFlow.appendChild(stepElement);
                    
                    // 添加动画延迟
                    setTimeout(() => {
                        stepElement.classList.add('fade-in');
                    }, index * 200);
                });
            }
            
            // 模拟执行
            simulateBtn.addEventListener('click', function() {
                // 获取沟通参数
                const clarity = parseInt(document.getElementById('clarity').value);
                const timeliness = parseInt(document.getElementById('timeliness').value);
                const feedback = parseInt(document.getElementById('feedback').value);
                
                // 模拟沟通过程动画
                simulateCommunication(clarity, timeliness, feedback);
                
                // 计算执行结果
                setTimeout(() => {
                    showResults(clarity, timeliness, feedback);
                }, 3000);
            });
            
            // 模拟沟通过程动画
            function simulateCommunication(clarity, timeliness, feedback) {
                const bubbles = document.querySelectorAll('.message-bubble');
                
                // 重置状态
                bubbles.forEach(bubble => {
                    bubble.classList.remove('bg-red-100', 'text-red-800', 'bg-green-100', 'text-green-800');
                });
                
                // 根据参数质量决定动画效果
                const overallQuality = (clarity + timeliness + feedback) / 3;
                
                // 模拟沟通过程
                let delay = 0;
                bubbles.forEach((bubble, index) => {
                    setTimeout(() => {
                        // 添加脉冲动画
                        bubble.classList.add('transform', 'scale-110');
                        
                        // 根据参数决定沟通是否成功
                        const successProbability = overallQuality / 100 * 0.8 + 0.2; // 确保至少有20%成功概率
                        const isSuccess = Math.random() < successProbability;
                        
                        if (isSuccess) {
                            bubble.classList.add('bg-green-100', 'text-green-800');
                        } else {
                            bubble.classList.add('bg-red-100', 'text-red-800');
                        }
                        
                        setTimeout(() => {
                            bubble.classList.remove('transform', 'scale-110');
                        }, 500);
                        
                        // 如果是最后一个节点，显示结果
                        if (index === bubbles.length - 1) {
                            setTimeout(() => {
                                resultSection.classList.remove('hidden');
                                resultSection.classList.add('fade-in');
                                // 滚动到结果区域
                                resultSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                            }, 500);
                        }
                    }, delay);
                    
                    delay += 500 + (100 - timeliness) * 2; // 及时性影响沟通速度
                });
            }
            
            // 显示执行结果
            function showResults(clarity, timeliness, feedback) {
                // 计算执行效率 (加权平均)
                const efficiency = clarity * 0.4 + timeliness * 0.3 + feedback * 0.3;
                
                // 计算任务完成度 (受最低参数影响)
                const minParam = Math.min(clarity, timeliness, feedback);
                const completion = minParam * 0.7 + (clarity + timeliness + feedback) / 3 * 0.3;
                
                // 更新进度条
                document.getElementById('efficiency-bar').style.width = `${efficiency}%`;
                document.getElementById('completion-bar').style.width = `${completion}%`;
                
                // 更新分数显示
                document.getElementById('efficiency-score').textContent = `${Math.round(efficiency)}%`;
                document.getElementById('completion-score').textContent = `${Math.round(completion)}%`;
                
                // 提供反馈建议
                const feedbackElement = document.getElementById('result-feedback');
                
                if (efficiency >= 80) {
                    feedbackElement.textContent = "优秀! 您的沟通方式非常高效，执行效果极佳。";
                    feedbackElement.className = "italic text-green-600";
                } else if (efficiency >= 60) {
                    feedbackElement.textContent = "良好! 沟通效果不错，但仍有提升空间。";
                    feedbackElement.className = "italic text-blue-600";
                } else if (efficiency >= 40) {
                    feedbackElement.textContent = "一般。建议提高沟通清晰度或反馈频率。";
                    feedbackElement.className = "italic text-yellow-600";
                } else {
                    feedbackElement.textContent = "需要改进。沟通效果不佳导致执行效率低下。";
feedbackElement.className = "italic text-red-600";
                }
              
                // 如果用户尝试了多种组合，显示结束界面
                if (simulateBtn.getAttribute('data-runs') >= 3) {
                    setTimeout(() => {
                        gameScreen.classList.add('hidden');
                        endScreen.classList.remove('hidden');
                        endScreen.classList.add('fade-in');
                        endScreen.scrollIntoView({ behavior: 'smooth' });
                    }, 2000);
                } else {
                    // 增加运行计数
                    const runs = parseInt(simulateBtn.getAttribute('data-runs') || '0');
                    simulateBtn.setAttribute('data-runs', runs + 1);
                }
            }

            // 实时更新滑块值显示
            document.getElementById('clarity').addEventListener('input', function() {
                document.getElementById('clarity-value').textContent = this.value + '%';
            });
            document.getElementById('timeliness').addEventListener('input', function() {
                document.getElementById('timeliness-value').textContent = this.value + '%';
            });
            document.getElementById('feedback').addEventListener('input', function() {
                document.getElementById('feedback-value').textContent = this.value + '%';
            });

            // 为模拟按钮添加运行计数属性
            simulateBtn.setAttribute('data-runs', '0');
        });
    </script>
</body>
</html>
